<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>上传文件</title>
<link rel="stylesheet" href="../js/layui/css/layui.css" />
</head>
<body>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
  <legend>上传年会游戏问题</legend>
</fieldset> 
<div class="layui-upload">
   <div class="layui-upload-drag" id="exctFileLoad">
	  <i class="layui-icon"></i>
	  <p>点击上传，或将文件拖拽到此处</p>
	</div>
  <div class="layui-upload-list">
    <table class="layui-table">
      <thead>
        <tr><th>文件名</th>
        <th>大小</th>
        <th>状态</th>
      </thead>
      <tbody id="demoList"></tbody>
    </table>
    
    <table class="layui-hide" id="annualMeeting_question_table_temporaryData" lay-filter="annualMeeting_question_table_temporaryData"></table>
  </div>
  <button type="button" class="layui-btn" id="testListAction">开始上传</button>
</div> 

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
  <legend>数据库数据</legend>
</fieldset>
<table class="layui-hide" id="annualMeeting_question_table" lay-filter="annualMeeting_question_table"></table>
</body>
<script type="text/javascript" src="../js/layui/layui.js"></script>

<script type="text/javascript">
var table = null;
layui.use('table', function(){
	table = layui.table;
	var $ = layui.$;
	table.render({
	 	elem: '#annualMeeting_question_table'
	 	,url: '/demo/table/user/'
	 	,cols: [[
	 	   {field:'id', title: 'id', width:'5%',sort: true}
	 	   ,{field:'topic', title: '题目', width:'70%'}
	 	   ,{field:'answerOne', title: '答案一', width:'5%'}
	 	   ,{field:'answerTwo', title: '答案二', width:'5%'}
	 	   ,{field:'answerThree', title: '答案三', width:'5%'}
	 	   ,{field:'answerFour', title: '答案四', width:'5%'}
	 	   ,{field:'rightAnswer', title: '正确答案', width:'5%'}
	 	]]
	 	,id:'annualMeeting_question_table'
	 	,loading:true
	 	,response:{
	 		  statusName: 'state' //数据状态的字段名称
			  ,statusCode: 1 //成功的状态码
			  ,msgName: 'stateInfo' //状态信息的字段名称
			  ,countName: 'count' //数据总数的字段名称
			  ,dataName: 'allQuestions' //数据列表的字段名称
	 	}
	 })
	 
	 table.render({
			 	elem: '#annualMeeting_question_table_temporaryData'
			 	,cols: [[
		 		 	   {field:'id', title: 'id', width:'5%',sort: true}
		 		 	   ,{field:'topic', title: '题目', width:'70%' ,edit:'text'}
		 		 	   ,{field:'answerOne', title: '答案一', width:'5%' ,edit:'text'}
		 		 	   ,{field:'answerTwo', title: '答案二', width:'5%' ,edit:'text'}
		 		 	   ,{field:'answerThree', title: '答案三', width:'5%' ,edit:'text'}
		 		 	   ,{field:'answerFour', title: '答案四', width:'5%' ,edit:'text'}
		 		 	   ,{field:'rightAnswer', title: '正确答案', width:'5%' ,edit:'text'}
		 		 ]
			 	]
			 	,id:'annualMeeting_question_table_temporaryData'
			 	,loading:true
			 	,response:{
			 		  statusName: 'state' //数据状态的字段名称
					  ,statusCode: 1 //成功的状态码
					  ,msgName: 'stateInfo' //状态信息的字段名称
					  ,countName: 'count' //数据总数的字段名称
					  ,dataName: 'allQuestions' //数据列表的字段名称
			 	}
			 })
	 table.on('edit(annualMeeting_question_table_temporaryData)', function(obj){
	    var value = obj.value //得到修改后的值
	    ,data = obj.data //得到所在行所有键值
	    ,field = obj.field; //得到字段
	    $.post('/updataQuestionData',{id:data.id,fieldName:field,fieldValue:value})
	  });
})
</script>
<script type="text/javascript" src="../js/uploadExctFile.js"></script>
</html>